{"version":3,"sources":["main.js"],"names":["MEDIA","_state","_this","default","iframe","attributes","width","height","is","get","youtube","vimeo","template","embedUrl","idByUrl","url","id","$","ajax","type","success","response","video_id","regExp","match","length","video","autoplay","embed","videoType","settings","console","warn","MEDIA$1","mediaModal","init","registerEvents","on","e","$this","currentTarget","media","data","controls","modal","$el","target","modalTemplate","appendTo","one","find","html","wrapperTemplate","placeholderTemplate","mediaHtml","mediaModal$1","ready"],"mappings":";;AAAA,IAAMA,QAAS,YAAM;AACnB,MAAIC,SAAS,EAAb;AACA,MAAMC,QAAQ;AACZC,aAAS;AACPC,cAAQ;AACNC,oBAAY,0EADN;AAENC,eAAO,GAFD;AAGNC,gBAAQ;AAHF;AADD,KADG;AAQZC,QAAI,EARQ;AASZC,SAAK;AACHC,eAAS,EADN;AAEHC,aAAO;AAFJ;AATO,GAAd;AAcAT,QAAMC,OAAN,CAAcC,MAAd,CAAqBQ,QAArB,GAAgC,UAACC,QAAD;AAAA,mCACfA,QADe,wBAEnBX,MAAMC,OAAN,CAAcC,MAAd,CAAqBE,KAFF,yBAGlBJ,MAAMC,OAAN,CAAcC,MAAd,CAAqBG,MAHH,iBAI1BL,MAAMC,OAAN,CAAcC,MAAd,CAAqBC,UAJK;AAAA,GAAhC;AAMAH,QAAMO,GAAN,CAAUE,KAAV,CAAgBG,OAAhB,GAA0B,UAACC,GAAD,EAAS;AACjC,QAAIC,KAAK,KAAT;AACAC,MAAEC,IAAF,CAAO;AACLH,WAAK,2CAAyCA,GADzC;AAELI,YAAM,KAFD;AAGLC,eAAS,iBAASC,QAAT,EAAmB;AAC1B,YAAGA,SAASC,QAAZ,EAAsB;AACpBN,eAAKK,SAASC,QAAd;AACD;AACF;AAPI,KAAP;AASA,WAAON,EAAP;AACD,GAZD;AAaAd,QAAMO,GAAN,CAAUC,OAAV,CAAkBI,OAAlB,GAA4B,UAACC,GAAD,EAAS;AACnC,QAAMQ,SAAS,kEAAf;AACA,QAAMC,QAAQT,IAAIS,KAAJ,CAAUD,MAAV,CAAd;AACA,QAAIC,SAASA,MAAM,CAAN,EAASC,MAAT,IAAmB,EAAhC,EAAoC;AAClC,aAAOD,MAAM,CAAN,CAAP;AACD,KAFD,MAEO;AACL,aAAO,KAAP;AACD;AACF,GARD;AASAtB,QAAMO,GAAN,CAAUC,OAAV,CAAkBG,QAAlB,GAA6B,UAACE,GAAD,EAAS;AACpC,QAAIb,MAAMM,EAAN,CAASkB,KAAT,CAAeX,GAAf,KAAuBb,MAAMM,EAAN,CAASE,OAAT,CAAiBK,GAAjB,CAA3B,EAAiD;AAC/C,UAAMC,KAAKd,MAAMO,GAAN,CAAUC,OAAV,CAAkBI,OAAlB,CAA0BC,GAA1B,CAAX;AACA,UAAMY,2BAAwB1B,OAAO0B,QAAP,GAAkB,CAAlB,GAAsB,CAA9C,CAAN;AACA,0CAAkCX,EAAlC,SAAwCW,QAAxC;AACD;AACF,GAND;AAOAzB,QAAMO,GAAN,CAAUE,KAAV,CAAgBE,QAAhB,GAA2B,UAACE,GAAD,EAAS;AAClC,QAAIb,MAAMM,EAAN,CAASkB,KAAT,CAAeX,GAAf,KAAuBb,MAAMM,EAAN,CAASG,KAAT,CAAeI,GAAf,CAA3B,EAA+C;AAC7C,UAAMC,KAAKd,MAAMO,GAAN,CAAUE,KAAV,CAAgBG,OAAhB,CAAwBC,GAAxB,CAAX;AACA,UAAMY,2BAAwB1B,OAAO0B,QAAP,GAAkB,CAAlB,GAAsB,CAA9C,CAAN;AACA,2CAAmCX,EAAnC,gBAAgDW,QAAhD;AACD;AACF,GAND;AAOAzB,QAAMO,GAAN,CAAUC,OAAV,CAAkBkB,KAAlB,GAA0B,UAACb,GAAD,EAAS;AACjC,QAAMF,WAAWX,MAAMO,GAAN,CAAUC,OAAV,CAAkBG,QAAlB,CAA2BE,GAA3B,CAAjB;AACA,WAAOb,MAAMC,OAAN,CAAcC,MAAd,CAAqBQ,QAArB,CAA8BC,QAA9B,CAAP;AACD,GAHD;AAIAX,QAAMO,GAAN,CAAUE,KAAV,CAAgBiB,KAAhB,GAAwB,UAACb,GAAD,EAAS;AAC/B,QAAMF,WAAWX,MAAMO,GAAN,CAAUE,KAAV,CAAgBE,QAAhB,CAAyBE,GAAzB,CAAjB;AACA,WAAOb,MAAMC,OAAN,CAAcC,MAAd,CAAqBQ,QAArB,CAA8BC,QAA9B,CAAP;AACD,GAHD;AAIAX,QAAMM,EAAN,CAASE,OAAT,GAAmB,UAACK,GAAD;AAAA,WAAS,CAAC,CAACb,MAAMO,GAAN,CAAUC,OAAV,CAAkBI,OAAlB,CAA0BC,GAA1B,CAAX;AAAA,GAAnB;AACAb,QAAMM,EAAN,CAASG,KAAT,GAAiB,UAACI,GAAD;AAAA,WAAS,CAAC,CAACb,MAAMO,GAAN,CAAUE,KAAV,CAAgBG,OAAhB,CAAwBC,GAAxB,CAAX;AAAA,GAAjB;AACAb,QAAMM,EAAN,CAASkB,KAAT,GAAiB;AAAA,WAAM,CAAC,CAACxB,MAAMM,EAAN,CAASE,OAAX,IAAsB,CAAC,CAACR,MAAMM,EAAN,CAASG,KAAvC;AAAA,GAAjB;AACAT,QAAMO,GAAN,CAAUoB,SAAV,GAAsB,UAACd,GAAD,EAAS;AAC7B,QAAI,CAAC,CAACb,MAAMM,EAAN,CAASE,OAAT,CAAiBK,GAAjB,CAAN,EAA6B;AAC3B,aAAO,SAAP;AACD,KAFD,MAEO,IAAI,CAAC,CAACb,MAAMM,EAAN,CAASG,KAAT,CAAeI,GAAf,CAAN,EAA2B;AAChC,aAAO,OAAP;AACD,KAFM,MAEA;AACL,aAAO,SAAP;AACD;AACF,GARD;AASAb,QAAMO,GAAN,CAAUL,MAAV,GAAmB,UAACW,GAAD,EAAMe,QAAN,EAAmB;AACpC7B,WAAO0B,QAAP,GAAkBG,SAASH,QAA3B;AACA,QAAIzB,MAAMM,EAAN,CAASkB,KAAT,CAAeX,GAAf,CAAJ,EAAwB;AACtB,UAAMc,YAAY3B,MAAMO,GAAN,CAAUoB,SAAV,CAAoBd,GAApB,CAAlB;AACA,aAAOb,MAAMO,GAAN,CAAUoB,SAAV,EAAqBD,KAArB,CAA2Bb,GAA3B,CAAP;AACD,KAHD,MAGO;AACLgB,cAAQC,IAAR,CAAa,4BAAb;AACA,aAAO,KAAP;AACD;AACF,GATD;;AAWA,SAAO;AACLxB,QAAIN,MAAMM,EADL;AAELC,SAAKP,MAAMO;AAFN,GAAP;AAID,CA7Fa,EAAd;;AA+FA,IAAIwB,UAAU;AACZzB,MAAIR,MAAMQ,EADE;AAEZC,OAAKT,MAAMS;AAFC,CAAd;;AAKA,IAAMyB,aAAc,YAAM;AACxB,MAAMhC,QAAQ,EAAd;AACAA,QAAMiC,IAAN,GAAa,YAAM;AACjBjC,UAAMkC,cAAN;AACD,GAFD,EAGAlC,MAAMkC,cAAN,GAAuB,YAAM;AAC3BnB,MAAE,uCAAF,EAA2CoB,EAA3C,CAA8C,OAA9C,EAAuD,UAACC,CAAD,EAAO;AAC5D,UACEC,QAAQtB,EAAEqB,EAAEE,aAAJ,CADV;AAAA,UAEEC,QAAQ;AACN1B,aAAKwB,MAAMG,IAAN,CAAW,WAAX,CADC;AAENf,kBAAU,CAAC,CAACY,MAAMG,IAAN,CAAW,gBAAX,CAFN;AAGNC,kBAAU,CAAC,CAACJ,MAAMG,IAAN,CAAW,gBAAX;AAHN,OAFV;AAAA,UAOEE,QAAQ;AACNC,aAAK5B,EAAEsB,MAAMG,IAAN,CAAW,QAAX,CAAF,CADC;AAENI,gBAAQP,MAAMG,IAAN,CAAW,QAAX;AAFF,OAPV;AAWA;AACA,UAAI,CAACzB,EAAE2B,MAAME,MAAR,EAAgBrB,MAArB,EAA4B;AAC1BR,UAAEiB,WAAWa,aAAX,EAAF,EAA8BC,QAA9B,CAAuC/B,EAAE,MAAF,CAAvC;AACA2B,cAAMC,GAAN,GAAY5B,EAAE2B,MAAME,MAAR,CAAZ;AACD;;AAED;AACAF,YAAMC,GAAN,CACGI,GADH,CACO,eADP,EACwB,YAAM;AAC1BL,cAAMC,GAAN,CAAUK,IAAV,CAAe,aAAf,EAA8BC,IAA9B,CACEjB,WAAWkB,eAAX,CACEnB,QAAQxB,GAAR,CAAYL,MAAZ,CAAmBqC,MAAM1B,GAAzB,EAA8B;AAC5BY,oBAAUc,MAAMd;AADY,SAA9B,CADF,CADF;AAOD,OATH,EAUGsB,GAVH,CAUO,eAVP,EAUwB,YAAM;AAC1BL,cAAMC,GAAN,CAAUK,IAAV,CAAe,aAAf,EAA8BC,IAA9B,CACEjB,WAAWkB,eAAX,CACElB,WAAWmB,mBAAX,EADF,CADF;AAKD,OAhBH;AAiBD,KApCD;AAqCD,GAzCD,EA0CAnD,MAAMmD,mBAAN,GAA4B;AAAA,WAAM,6DAAN;AAAA,GA1C5B,EA2CAnD,MAAM6C,aAAN,GAAsB;AAAA,4gBAUV7C,MAAMmD,mBAAN,EAVU;AAAA,GA3CtB,EA0DAnD,MAAMkD,eAAN,GAAwB,UAACE,SAAD;AAAA,iHAElB,CAAC,CAACA,SAAF,GAAcA,SAAd,GAA0B,IAFR;AAAA,GA1DxB;;AA+DA,SAAO;AACLnB,UAAMjC,MAAMiC,IADP;AAELkB,yBAAqBnD,MAAMmD,mBAFtB;AAGLN,mBAAe7C,MAAM6C,aAHhB;AAILK,qBAAiBlD,MAAMkD;AAJlB,GAAP;AAMD,CAvEkB,EAAnB;;AAyEA,IAAIG,eAAe;AACjBpB,QAAMD,WAAWC,IADA;AAEjBkB,uBAAqBnB,WAAWmB,mBAFf;AAGjBD,mBAAiBlB,WAAWkB,eAHX;AAIjBL,iBAAeb,WAAWa;AAJT,CAAnB;;AAOA,CAAC,YAAM;AACL9B,IAAE,UAAF,EAAcuC,KAAd,CAAoB,YAAM;AACxBD,iBAAapB,IAAb;AACD,GAFD;AAGD,CAJD","file":"main.js","sourcesContent":["const MEDIA = (() => {\n  let _state = {};\n  const _this = {\n    default: {\n      iframe: {\n        attributes: 'webkitallowfullscreen mozallowfullscreen allowfullscreen frameborder=\"0\"',\n        width: 560,\n        height: 315\n      }\n    },\n    is: {},\n    get: {\n      youtube: {},\n      vimeo: {}\n    }\n  };\n  _this.default.iframe.template = (embedUrl) => `\n    <iframe src=\"${embedUrl}\"\n      width=\"${_this.default.iframe.width}\"\n      height=\"${_this.default.iframe.height}\"\n      ${_this.default.iframe.attributes}></iframe>\n  `;\n  _this.get.vimeo.idByUrl = (url) => {\n    var id = false;\n    $.ajax({\n      url: 'https://vimeo.com/api/oembed.json?url='+url,\n      type: 'GET',\n      success: function(response) {\n        if(response.video_id) {\n          id = response.video_id;\n        }\n      }\n    });\n    return id;\n  };\n  _this.get.youtube.idByUrl = (url) => {\n    const regExp = /^.*(youtu\\.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|\\&v=)([^#\\&\\?]*).*/;\n    const match = url.match(regExp);\n    if (match && match[2].length == 11) {\n      return match[2];\n    } else {\n      return false;\n    }\n  };\n  _this.get.youtube.embedUrl = (url) => {\n    if (_this.is.video(url) && _this.is.youtube(url)){\n      const id = _this.get.youtube.idByUrl(url);\n      const autoplay = `&autoplay=${_state.autoplay ? 1 : 0}`;\n      return `//www.youtube.com/embed/${id}?${autoplay}`;\n    }\n  };\n  _this.get.vimeo.embedUrl = (url) => {\n    if (_this.is.video(url) && _this.is.vimeo(url)){\n      const id = _this.get.vimeo.idByUrl(url);\n      const autoplay = `&autoplay=${_state.autoplay ? 1 : 0}`;\n      return `//player.vimeo.com/video/${id}?badge=0${autoplay}`;\n    }\n  };\n  _this.get.youtube.embed = (url) => {\n    const embedUrl = _this.get.youtube.embedUrl(url);\n    return _this.default.iframe.template(embedUrl);\n  };\n  _this.get.vimeo.embed = (url) => {\n    const embedUrl = _this.get.vimeo.embedUrl(url);\n    return _this.default.iframe.template(embedUrl);\n  };\n  _this.is.youtube = (url) => !!_this.get.youtube.idByUrl(url);\n  _this.is.vimeo = (url) => !!_this.get.vimeo.idByUrl(url);\n  _this.is.video = () => !!_this.is.youtube || !!_this.is.vimeo;\n  _this.get.videoType = (url) => {\n    if (!!_this.is.youtube(url)) {\n      return 'youtube';\n    } else if (!!_this.is.vimeo(url)) {\n      return 'vimeo';\n    } else {\n      return 'unknown';\n    }\n  };\n  _this.get.iframe = (url, settings) => {\n    _state.autoplay = settings.autoplay;\n    if (_this.is.video(url)){\n      const videoType = _this.get.videoType(url);\n      return _this.get[videoType].embed(url);\n    } else {\n      console.warn('Media url type is unknown.');\n      return false;\n    }\n  };\n\n  return {\n    is: _this.is,\n    get: _this.get\n  };\n})();\n\nvar MEDIA$1 = {\n  is: MEDIA.is,\n  get: MEDIA.get\n};\n\nconst mediaModal = (() => {\n  const _this = {};\n  _this.init = () => {\n    _this.registerEvents();\n  },\n  _this.registerEvents = () => {\n    $('[data-toggle=\"modal\"][data-media-url]').on('click', (e) => {\n      const\n        $this = $(e.currentTarget),\n        media = {\n          url: $this.data('media-url'),\n          autoplay: !!$this.data('media-autoplay'),\n          controls: !!$this.data('media-controls')\n        },\n        modal = {\n          $el: $($this.data('target')),\n          target: $this.data('target')\n        };\n      // if modal doesn't exist, add it and cache it\n      if (!$(modal.target).length){\n        $(mediaModal.modalTemplate()).appendTo($('body'));\n        modal.$el = $(modal.target);\n      }\n\n      // add modal listeners\n      modal.$el\n        .one('show.bs.modal', () => {\n          modal.$el.find('.modal-body').html(\n            mediaModal.wrapperTemplate(\n              MEDIA$1.get.iframe(media.url, {\n                autoplay: media.autoplay\n              })\n            )\n          );\n        })\n        .one('hide.bs.modal', () => {\n          modal.$el.find('.modal-body').html(\n            mediaModal.wrapperTemplate(\n              mediaModal.placeholderTemplate()\n            )\n          );\n        });\n    });\n  },\n  _this.placeholderTemplate = () => '<div class=\"embed-responsive-item placeholder-block\"></div>',\n  _this.modalTemplate = () => `\n    <div class=\"modal fade\" id=\"modal--primary\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"Modal Window\" aria-hidden=\"true\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <a class=\"close modal__btn-close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\"><img src=\"images/icon__btn-x.png\"/></span>\n            </a>\n          </div>\n          <div class=\"modal-body\">\n            ${_this.placeholderTemplate()}\n          </div>\n        </div>\n      </div>\n    </div>`,\n  _this.wrapperTemplate = (mediaHtml) => `\n    <div role=\"media\" class=\"media-container embed-responsive embed-responsive-16by9\">\n      ${!!mediaHtml ? mediaHtml : null}\n    </div>`;\n\n  return {\n    init: _this.init,\n    placeholderTemplate: _this.placeholderTemplate,\n    modalTemplate: _this.modalTemplate,\n    wrapperTemplate: _this.wrapperTemplate\n  }\n})();\n\nvar mediaModal$1 = {\n  init: mediaModal.init,\n  placeholderTemplate: mediaModal.placeholderTemplate,\n  wrapperTemplate: mediaModal.wrapperTemplate,\n  modalTemplate: mediaModal.modalTemplate\n};\n\n(() => {\n  $('document').ready(() => {\n    mediaModal$1.init();\n  });\n})();\n"]}