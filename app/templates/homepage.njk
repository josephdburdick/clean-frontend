{% extends "layout/_layout.njk" %}
{% block content %}
  {% set imageDir = global.dir.images %}
  {% set data = global.views.homepage %}

  {% from "macros/_section-header.njk" import sectionHeader %}
  {% from "macros/_media-modal-toggle.njk" import mediaModalToggle %}
  {% from "macros/_hero-carousel.njk" import heroCarousel %}
  <!-- MAIN -->
  <main role="main" class="main-body page__{{data.id}}">
    {# home hero #}
    {% set hero = data.sections.hero %}
    <section class="clearfix page-section section__hero">
      <div class="row">
        <div class="col-md-12">
          {{ heroCarousel(items = hero.items, indicators = true) }}
        </div>
      </div>
    </section>
    {# /home hero #}

    {# product start #}
    {% set product = data.sections.product %}

    <section class="clearfix container page-section section__product">
      <div class="row">
        <div class="col col-sm-12 col-md-6 col-lg-8 section__product_feature-image">
          <div class="align-items-center text-center h-100">
            <img src="{{imageDir}}{{product.image.url}}" class="img-fluid" alt="{{product.image.alt}}">
          </div>
        </div>
        <div class="col-sm-12 hidden-sm-up mb-2"></div>
        <div class="col col-sm-12 col-md-6 col-lg-4 fill-height-or-more">
          <div class="product-description">
            <div class="module-header">
              <div class="module-heading">
                {{product.title}}
              </div>
            </div>
            <div class="body-text--lg">
              {{product.bodyText | safe}}
            </div>
          </div>
          <footer class="product-attributes text-md-left text-center">
            <ul class="row no-gutter list-unstyled product-seals">
              {% for item in product.iconModules.items %}
                <li class="col-auto col-lg-3">
                  <figure class="text-center product-seal">
                    <img src="{{imageDir}}{{item.image.url}}" alt="{{item.text}}" width={{item.image.size}}>
                    <figcaption class="text-muted">{{item.text}}</figcaption>
                  </figure>
                </li>
              {% endfor %}
            </ul>
            <a href="{{product.ctaBtn.href}}" class="btn btn-lg btn-outline-primary">{{product.ctaBtn.text}}</a>
          </footer>
        </div>
      </div>
    </section>
    {# /product start #}

    {# features start #}
    {% set features = data.sections.features %}

    <section class="clearfix container page-section section__features">

      {{ sectionHeader(heading = features.title) }}

      <div class="row">
        <div class="col">
          <div class="row row--double-gutter justify-content-lg-between justify-content-center section__features-items">
            {% for item in features.items %}
              <div class="col-xs-10 col-sm-6 col-md-6 col-lg-4 section__features-item">
                <div class="card-block icon-container text-center">
                  <img class="img-fluid" src="{{imageDir}}{{item.image.url}}" alt="{{item.title}}" width="{{item.image.width}}" height="{{item.image.height}}"/>
                </div>
                <div class="card-block card-block__header">
                  <h4 class="card-heading heading-text--medium text-center text-uppercase">
                    {{item.title}}
                  </h4>
                </div>
                <div class="card-block card-body">
                  <div class="card-text text-center body-text--lg features-module__body">{{item.bodyText}}</div>
                </div>
              </div>
              <div class="col-sm-12 hidden-sm-up mb-2"></div>
            {% endfor %}
          </div>
        </div>
      </div>
    </section>
    {# /features #}

    {# video hero #}
    {% set video = data.sections.video %}
    <section class="clearfix container page-section section__video">

      {{ sectionHeader(heading = video.title, hr = true) }}

      <div class="row">
        <div class="col-md-12">
          {{ mediaModalToggle(poster = imageDir + video.poster.url, mediaUrl=video.url) }}
        </div>
      </div>
    </section>
    {# /video hero #}

    {# blog #}
    {% set blog = data.sections.blog %}
    <section class="clearfix container page-section section__blog">

      {{ sectionHeader(heading = blog.title, hr = true) }}

      <div class="row row--double-gutter justify-content-center caption-cards">
        {% for item in blog.items %}
          <div class="col-xs-10 col-sm-6 col-md-6 col-lg-4 caption-card fill-height-or-more">
            <figure>
              <img class="img-fluid" src="{{imageDir}}{{item.image.url}}" alt="{{item.title}}" width="{{item.image.width}}" height="{{item.image.height}}"/>
            </figure>
            <div class="card-block caption-card__header fill-height-or-more">
              <h4 class="card-heading heading-text--medium text-center text-uppercase">
                {{item.title}}
              </h4>
            </div>
          </div>
        {% endfor %}
      </div>
    </section>
    {# /blog #}

    {# story #}
    {% set story = data.sections.story %}
    <section class="clearfix container page-section section__story">
      <a href="#" class="d-block">
        <div class="bg bg-cover hero-card" style="background-image:url({{imageDir}}{{story.bg.url}}); min-height: {{story.bg.height}}px;">
          <div class="card justify-content-center text-center">
            <h4 class="display-3">{{story.title}}</h4>
            <h4 class="display-3 mt-1">
              <strong>{{story.subtitle}}</strong>
            </h4>
          </div>
        </div>
      </a>
    </section>
    {# /story #}

  </main>
  <!-- / MAIN -->

{% endblock %}
